<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Learning R through examples</title>
  <meta name="description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions welcome.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Learning R through examples" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions welcome." />
  <meta name="github-repo" content="gexijin/learnR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Learning R through examples" />
  
  <meta name="twitter:description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions welcome." />
  

<meta name="author" content="Xijin Ge">


<meta name="date" content="2019-01-17">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="analyzing-heart-attack-data-set-ii.html">
<link rel="next" href="vectors-1.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.39.2/plotly-latest.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Index</a></li>
<li class="chapter" data-level="1" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html"><i class="fa fa-check"></i><b>1</b> Step into R program-Analyzing iris flower dataset</a><ul>
<li class="chapter" data-level="1.1" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html#data-frames-have-rows-and-columns-the-iris-flower-dataset"><i class="fa fa-check"></i><b>1.1</b> Data frames have rows and columns: the Iris flower dataset</a></li>
<li class="chapter" data-level="1.2" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html#analyzing-one-set-of-numbers"><i class="fa fa-check"></i><b>1.2</b> Analyzing one set of numbers</a></li>
<li class="chapter" data-level="1.3" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html#students-t-test"><i class="fa fa-check"></i><b>1.3</b> Student’s t-test</a></li>
<li class="chapter" data-level="1.4" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html#test-for-normal-distribution"><i class="fa fa-check"></i><b>1.4</b> Test for normal distribution</a></li>
<li class="chapter" data-level="1.5" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html#analyzing-a-column-of-categorical-values"><i class="fa fa-check"></i><b>1.5</b> Analyzing a column of categorical values</a></li>
<li class="chapter" data-level="1.6" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html#analyzing-the-relationship-between-two-columns-of-numbers"><i class="fa fa-check"></i><b>1.6</b> Analyzing the relationship between two columns of numbers</a></li>
<li class="chapter" data-level="1.7" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html#visualizing-and-testing-the-differences-in-groups"><i class="fa fa-check"></i><b>1.7</b> Visualizing and testing the differences in groups</a></li>
<li class="chapter" data-level="1.8" data-path="step-into-r-program-analyzing-iris-flower-dataset.html"><a href="step-into-r-program-analyzing-iris-flower-dataset.html#testing-the-difference-among-multiple-groups-analysis-of-variance-anova"><i class="fa fa-check"></i><b>1.8</b> Testing the difference among multiple groups (Analysis of Variance: ANOVA)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><i class="fa fa-check"></i><b>2</b> Visualizing data set-Analyzing cars and iris flower data sets</a><ul>
<li class="chapter" data-level="2.1" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#basic-concepts-of-r-graphics"><i class="fa fa-check"></i><b>2.1</b> Basic concepts of R graphics</a></li>
<li class="chapter" data-level="2.2" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#visualizing-mtcars-dataset"><i class="fa fa-check"></i><b>2.2</b> Visualizing mtcars dataset</a><ul>
<li class="chapter" data-level="2.2.1" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#scatter-plot"><i class="fa fa-check"></i><b>2.2.1</b> scatter plot</a></li>
<li class="chapter" data-level="2.2.2" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#barplot-with-error-bars"><i class="fa fa-check"></i><b>2.2.2</b> Barplot with error bars</a></li>
<li class="chapter" data-level="2.2.3" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#visualizing-correlation-between-categorical-variables"><i class="fa fa-check"></i><b>2.2.3</b> Visualizing correlation between categorical variables</a></li>
<li class="chapter" data-level="2.2.4" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#detecting-correlations-among-variables"><i class="fa fa-check"></i><b>2.2.4</b> Detecting correlations among variables</a></li>
<li class="chapter" data-level="2.2.5" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#hierarchical-clustering"><i class="fa fa-check"></i><b>2.2.5</b> Hierarchical clustering</a></li>
<li class="chapter" data-level="2.2.6" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#representing-data-using-faces.-serious-scientific-research-only"><i class="fa fa-check"></i><b>2.2.6</b> Representing data using faces. Serious scientific research only!</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#visualizing-iris-data-set"><i class="fa fa-check"></i><b>2.3</b> Visualizing iris data set</a><ul>
<li class="chapter" data-level="2.3.1" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#a-matrix-only-contains-numbers"><i class="fa fa-check"></i><b>2.3.1</b> A Matrix only contains numbers</a></li>
<li class="chapter" data-level="2.3.2" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#scatter-plot-matrix"><i class="fa fa-check"></i><b>2.3.2</b> Scatter plot matrix</a></li>
<li class="chapter" data-level="2.3.3" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#heatmap"><i class="fa fa-check"></i><b>2.3.3</b> Heatmap</a></li>
<li class="chapter" data-level="2.3.4" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#star-plot"><i class="fa fa-check"></i><b>2.3.4</b> Star plot</a></li>
<li class="chapter" data-level="2.3.5" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#segment-diagrams"><i class="fa fa-check"></i><b>2.3.5</b> Segment diagrams</a></li>
<li class="chapter" data-level="2.3.6" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#parallel-coordinate-plot"><i class="fa fa-check"></i><b>2.3.6</b> Parallel coordinate plot</a></li>
<li class="chapter" data-level="2.3.7" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#box-plot"><i class="fa fa-check"></i><b>2.3.7</b> Box plot</a></li>
<li class="chapter" data-level="2.3.8" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#bar-plot-with-error-bar"><i class="fa fa-check"></i><b>2.3.8</b> Bar plot with error bar</a></li>
<li class="chapter" data-level="2.3.9" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#combining-plots"><i class="fa fa-check"></i><b>2.3.9</b> Combining plots</a></li>
<li class="chapter" data-level="2.3.10" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#plot-using-principal-component-analysis-pca"><i class="fa fa-check"></i><b>2.3.10</b> Plot using principal component analysis (PCA)</a></li>
<li class="chapter" data-level="2.3.11" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#attempt-at-ggplot2"><i class="fa fa-check"></i><b>2.3.11</b> Attempt at ggplot2</a></li>
<li class="chapter" data-level="2.3.12" data-path="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html"><a href="visualizing-data-set-analyzing-cars-and-iris-flower-data-sets.html#classification-predicting-the-odds-of-binary-outcomes"><i class="fa fa-check"></i><b>2.3.12</b> Classification: Predicting the odds of binary outcomes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-importing.html"><a href="data-importing.html"><i class="fa fa-check"></i><b>3</b> Data importing</a><ul>
<li class="chapter" data-level="3.1" data-path="data-importing.html"><a href="data-importing.html#enter-data-manually"><i class="fa fa-check"></i><b>3.1</b> Enter data manually</a></li>
<li class="chapter" data-level="3.2" data-path="data-importing.html"><a href="data-importing.html#reading-data-from-file-using-import-dataset-in-rstudio"><i class="fa fa-check"></i><b>3.2</b> Reading data from file using Import dataset in Rstudio</a></li>
<li class="chapter" data-level="3.3" data-path="data-importing.html"><a href="data-importing.html#data-manipulation-in-a-data-frame"><i class="fa fa-check"></i><b>3.3</b> Data manipulation in a data frame</a></li>
<li class="chapter" data-level="3.4" data-path="data-importing.html"><a href="data-importing.html#reading-file-using-read.table-read.csv-etc."><i class="fa fa-check"></i><b>3.4</b> Reading file using read.table, read.csv, etc.</a></li>
<li class="chapter" data-level="3.5" data-path="data-importing.html"><a href="data-importing.html#general-procedure-to-read-data-into-r"><i class="fa fa-check"></i><b>3.5</b> General procedure to read data into R:</a></li>
<li class="chapter" data-level="3.6" data-path="data-importing.html"><a href="data-importing.html#recommended-workflow-for-every-project"><i class="fa fa-check"></i><b>3.6</b> Recommended workflow for EVERY project</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analyzing-heart-attack-data-set-i.html"><a href="analyzing-heart-attack-data-set-i.html"><i class="fa fa-check"></i><b>4</b> Analyzing heart attack data set I</a><ul>
<li class="chapter" data-level="4.1" data-path="analyzing-heart-attack-data-set-i.html"><a href="analyzing-heart-attack-data-set-i.html#begin-your-analysis-by-examining-each-column-separately"><i class="fa fa-check"></i><b>4.1</b> Begin your analysis by examining each column separately</a></li>
<li class="chapter" data-level="4.2" data-path="analyzing-heart-attack-data-set-i.html"><a href="analyzing-heart-attack-data-set-i.html#possible-correlation-between-two-numeric-columns"><i class="fa fa-check"></i><b>4.2</b> Possible correlation between two numeric columns?</a></li>
<li class="chapter" data-level="4.3" data-path="analyzing-heart-attack-data-set-i.html"><a href="analyzing-heart-attack-data-set-i.html#associations-between-categorical-variables"><i class="fa fa-check"></i><b>4.3</b> Associations between categorical variables?</a></li>
<li class="chapter" data-level="4.4" data-path="analyzing-heart-attack-data-set-i.html"><a href="analyzing-heart-attack-data-set-i.html#associations-between-a-categorical-and-a-numeric-variables"><i class="fa fa-check"></i><b>4.4</b> Associations between a categorical and a numeric variables?</a></li>
<li class="chapter" data-level="4.5" data-path="analyzing-heart-attack-data-set-i.html"><a href="analyzing-heart-attack-data-set-i.html#associations-between-multiple-columns"><i class="fa fa-check"></i><b>4.5</b> Associations between multiple columns?</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="analyzing-heart-attack-data-set-ii.html"><a href="analyzing-heart-attack-data-set-ii.html"><i class="fa fa-check"></i><b>5</b> Analyzing heart attack data set II</a><ul>
<li class="chapter" data-level="5.1" data-path="analyzing-heart-attack-data-set-ii.html"><a href="analyzing-heart-attack-data-set-ii.html#scatter-plot-in-ggplot2"><i class="fa fa-check"></i><b>5.1</b> Scatter plot in ggplot2</a></li>
<li class="chapter" data-level="5.2" data-path="analyzing-heart-attack-data-set-ii.html"><a href="analyzing-heart-attack-data-set-ii.html#histograms-and-density-plots"><i class="fa fa-check"></i><b>5.2</b> Histograms and density plots</a></li>
<li class="chapter" data-level="5.3" data-path="analyzing-heart-attack-data-set-ii.html"><a href="analyzing-heart-attack-data-set-ii.html#box-plots-and-violin-plots"><i class="fa fa-check"></i><b>5.3</b> Box plots and Violin plots</a></li>
<li class="chapter" data-level="5.4" data-path="analyzing-heart-attack-data-set-ii.html"><a href="analyzing-heart-attack-data-set-ii.html#bar-plot-with-error-bars"><i class="fa fa-check"></i><b>5.4</b> Bar plot with error bars</a></li>
<li class="chapter" data-level="5.5" data-path="analyzing-heart-attack-data-set-ii.html"><a href="analyzing-heart-attack-data-set-ii.html#statistical-models-are-easy-interpretations-and-verifications-are-not"><i class="fa fa-check"></i><b>5.5</b> Statistical models are easy; interpretations and verifications are not!</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>6</b> Data structures</a><ul>
<li class="chapter" data-level="6.1" data-path="data-structures.html"><a href="data-structures.html#basic-concepts"><i class="fa fa-check"></i><b>6.1</b> Basic concepts</a><ul>
<li class="chapter" data-level="6.1.1" data-path="data-structures.html"><a href="data-structures.html#expressions"><i class="fa fa-check"></i><b>6.1.1</b> Expressions</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-structures.html"><a href="data-structures.html#logical-values"><i class="fa fa-check"></i><b>6.1.2</b> Logical Values</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-structures.html"><a href="data-structures.html#variables"><i class="fa fa-check"></i><b>6.1.3</b> Variables</a></li>
<li class="chapter" data-level="6.1.4" data-path="data-structures.html"><a href="data-structures.html#functions"><i class="fa fa-check"></i><b>6.1.4</b> Functions</a></li>
<li class="chapter" data-level="6.1.5" data-path="data-structures.html"><a href="data-structures.html#looking-for-help-and-example-code"><i class="fa fa-check"></i><b>6.1.5</b> Looking for Help and Example Code</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-structures.html"><a href="data-structures.html#data-structures-1"><i class="fa fa-check"></i><b>6.2</b> Data structures</a><ul>
<li class="chapter" data-level="6.2.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>6.2.1</b> Vectors</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>6.2.2</b> Lists</a></li>
<li class="chapter" data-level="6.2.3" data-path="data-structures.html"><a href="data-structures.html#strings-and-string-vectors"><i class="fa fa-check"></i><b>6.2.3</b> Strings and string vectors</a></li>
<li class="chapter" data-level="6.2.4" data-path="data-structures.html"><a href="data-structures.html#matrix-operations"><i class="fa fa-check"></i><b>6.2.4</b> Matrix operations</a></li>
<li class="chapter" data-level="6.2.5" data-path="data-structures.html"><a href="data-structures.html#operations-on-data-frames"><i class="fa fa-check"></i><b>6.2.5</b> Operations on data frames</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-structures.html"><a href="data-structures.html#for-more-in-depth-exercises"><i class="fa fa-check"></i><b>6.3</b> For more in-depth exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="vectors-1.html"><a href="vectors-1.html"><i class="fa fa-check"></i><b>7</b> Vectors</a></li>
<li class="chapter" data-level="8" data-path="matrics-and-arrays.html"><a href="matrics-and-arrays.html"><i class="fa fa-check"></i><b>8</b> Matrics and arrays</a></li>
<li class="chapter" data-level="9" data-path="lists-1.html"><a href="lists-1.html"><i class="fa fa-check"></i><b>9</b> Lists</a></li>
<li class="chapter" data-level="10" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>10</b> Data frames</a></li>
<li class="chapter" data-level="11" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>11</b> Strings</a></li>
<li class="chapter" data-level="12" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>12</b> Advanced topics</a><ul>
<li class="chapter" data-level="12.1" data-path="advanced-topics.html"><a href="advanced-topics.html#functions-1"><i class="fa fa-check"></i><b>12.1</b> Functions</a></li>
<li class="chapter" data-level="12.2" data-path="advanced-topics.html"><a href="advanced-topics.html#tidyverse"><i class="fa fa-check"></i><b>12.2</b> Tidyverse</a></li>
<li class="chapter" data-level="12.3" data-path="advanced-topics.html"><a href="advanced-topics.html#shiny-apps-and-interactive-plots"><i class="fa fa-check"></i><b>12.3</b> Shiny Apps and interactive plots</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="data-exploring-of-state-dataset.html"><a href="data-exploring-of-state-dataset.html"><i class="fa fa-check"></i><b>13</b> Data exploring of state dataset</a></li>
<li class="chapter" data-level="14" data-path="data-exploring-of-game-sale-dataset.html"><a href="data-exploring-of-game-sale-dataset.html"><i class="fa fa-check"></i><b>14</b> Data exploring of game sale dataset</a></li>
<li class="chapter" data-level="15" data-path="data-exploring-of-employee-salary-dataset.html"><a href="data-exploring-of-employee-salary-dataset.html"><i class="fa fa-check"></i><b>15</b> Data exploring of employee salary dataset</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning R through examples</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-structures" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Data structures</h1>
<p>R data types and basic expressions<sup>1</sup> : Common <strong>data structures</strong> in R include <strong>scalars, vectors, factors, matrices, data frames</strong>, and <strong>lists</strong>. These data structures can contain one or more individual data elements of several types, namely <strong>numeric</strong> (2.5), <strong>character</strong> (“Go Jacks”), or <strong>logical</strong> (TRUE or FALSE).</p>
<div id="basic-concepts" class="section level2">
<h2><span class="header-section-number">6.1</span> Basic concepts</h2>
<div id="expressions" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Expressions</h3>
<p>Type anything at the prompt, and R will evaluate it and print the answer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>There’s your result, <strong>2</strong>. It’s printed on the console right after your entry.</p>
<p>Type the string <strong>“Go Jacks”</strong>. (Don’t forget the quotes!)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;Go Jacks&quot;</span></code></pre></div>
<pre><code>## [1] &quot;Go Jacks&quot;</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-184" class="exercise"><strong>Exercise 6.1  </strong></span>Now try multiplying 45.6 by 78.9
</div>

</div>
<div id="logical-values" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Logical Values</h3>
<p>Some expressions return a “logical value”: <strong>TRUE</strong> or <strong>FALSE</strong>. (Many programming languages refer to these as “boolean” values.) Let’s try typing an expression that gives us a logical value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>And another logical value (note that you need a double-equals sign to check whether two values are equal - a single-equals sign won’t work):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">5</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p><strong>T</strong> and <strong>F</strong> are shorthand for <strong>TRUE</strong> and <strong>FALSE</strong>. Try this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">T <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="variables" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Variables</h3>
<p>As in other programming languages, you can store a value into a variable to access it later. Type <strong>x = 42</strong> to store a value in <strong>x</strong>. x is a <strong>scalar, with only one data element</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="dv">42</span></code></pre></div>
<p>You can also use the following. This is a conventional, safer way to assign values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">42</span></code></pre></div>
<p>x can now be used in expressions in place of the original result. Try dividing <strong>x</strong> by <strong>2</strong> (<strong>/</strong> is the division operator), and other calculations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">/</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] 21</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(x)</code></pre></div>
<pre><code>## [1] 3.73767</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">^</span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] 1764</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(x)</code></pre></div>
<pre><code>## [1] 6.480741</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">&gt;</span><span class="dv">1</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>You can re-assign any value to a variable at any time. Try assigning <strong>“Go Jacks!”</strong> to <strong>x</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;Go Jacks!&quot;</span></code></pre></div>
<p>You can print the value of a variable at any time just by typing its name in the console. Try printing the current value of x.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre><code>## [1] &quot;Go Jacks!&quot;</code></pre>
<p>Now try assigning the <strong>TRUE</strong> logical value to <strong>x</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="ot">TRUE</span></code></pre></div>
<p>You can store multiple values in a variable or object. That is called a <strong>vector</strong>, which is explained below. An object can also contain a table with rows and columns, like an Excel spreadsheet, as a <strong>matrix</strong>, or <strong>data frame</strong>.</p>
</div>
<div id="functions" class="section level3">
<h3><span class="header-section-number">6.1.4</span> Functions</h3>
<p>You call a function by typing its name, followed by one or more arguments to that function in parenthesis. Most of your R commands are functional calls. Let’s try using the sum function, to add up a few numbers. Enter:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>Some arguments have names. For example, to repeat a value 3 times, you would call the <strong>rep</strong> function and provide its <strong>times</strong> argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="st">&quot;Yo ho!&quot;</span>, <span class="dt">times =</span> <span class="dv">3</span>)</code></pre></div>
<pre><code>## [1] &quot;Yo ho!&quot; &quot;Yo ho!&quot; &quot;Yo ho!&quot;</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-196" class="exercise"><strong>Exercise 6.2  </strong></span>Try to find and run the two functions that sets and returns the current working directory.
</div>


<div class="exercise">
<span id="exr:unnamed-chunk-197" class="exercise"><strong>Exercise 6.3  </strong></span>Try to find and run the function that lists all the files in the current working folder.
</div>

</div>
<div id="looking-for-help-and-example-code" class="section level3">
<h3><span class="header-section-number">6.1.5</span> Looking for Help and Example Code</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">? sum </code></pre></div>
<p>A web page will pope up. This is the official help information for this function. At the bottom of the page is some example code. The quickest way to learn an R function is to run the example codes and see the input and output. You can easily copy, paste, and twist the example code to do your analysis.</p>
<p><strong>example()</strong> brings up examples of usage for the given function. Try displaying examples for the min function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">example</span>(min)</code></pre></div>
<pre><code>## 
## min&gt; require(stats); require(graphics)
## 
## min&gt;  min(5:1, pi) #-&gt; one number
## [1] 1
## 
## min&gt; pmin(5:1, pi) #-&gt;  5  numbers
## [1] 3.141593 3.141593 3.000000 2.000000 1.000000
## 
## min&gt; x &lt;- sort(rnorm(100));  cH &lt;- 1.35
## 
## min&gt; pmin(cH, quantile(x)) # no names
## [1] -2.71727892 -0.75458932 -0.02968613  0.70795567  1.35000000
## 
## min&gt; pmin(quantile(x), cH) # has names
##          0%         25%         50%         75%        100% 
## -2.71727892 -0.75458932 -0.02968613  0.70795567  1.35000000 
## 
## min&gt; plot(x, pmin(cH, pmax(-cH, x)), type = &quot;b&quot;, main =  &quot;Huber&#39;s function&quot;)</code></pre>
<pre><code>## 
## min&gt; cut01 &lt;- function(x) pmax(pmin(x, 1), 0)
## 
## min&gt; curve(      x^2 - 1/4, -1.4, 1.5, col = 2)</code></pre>
<pre><code>## 
## min&gt; curve(cut01(x^2 - 1/4), col = &quot;blue&quot;, add = TRUE, n = 500)
## 
## min&gt; ## pmax(), pmin() preserve attributes of *first* argument
## min&gt; D &lt;- diag(x = (3:1)/4) ; n0 &lt;- numeric()
## 
## min&gt; stopifnot(identical(D,  cut01(D) ),
## min+           identical(n0, cut01(n0)),
## min+           identical(n0, cut01(NULL)),
## min+           identical(n0, pmax(3:1, n0, 2)),
## min+           identical(n0, pmax(n0, 4)))</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">1</span>, pi)  <span class="co"># -&gt; one number</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Example commands and plots will show up automatically by typing Return in RStudio. In R, you need to click on the plots.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">example</span>(boxplot)  <span class="co"># bring example of boxplot</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-201-1.png" width="672" /></p>
<p>I found a lot of help information about R through Google. Google tolerate typos, grammar errors, and different notations. Also, most (99 %) of your questions have been asked and answered on various forums. Many R gurus answered a ton of questions on web sites like** <a href="stackoverflow.com" class="uri">stackoverflow.com</a>**, with example codes! I also use Google as a reference.</p>
<p>It is important to add comments to your code. Everything after the “#” will be ignored by R when running. We often recycle and repurpose our codes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)  <span class="co"># return the maximum value of a vector</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
</div>
<div id="data-structures-1" class="section level2">
<h2><span class="header-section-number">6.2</span> Data structures</h2>
<div id="vectors" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Vectors</h3>
<p>A vector is an object that holds a sequence of values of the same type. A vector’s values can be numbers, strings, logical values, or any other type, as long as they’re all the same type. They can come from a column of a data frame. if we have a vector x:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</code></pre></div>
<p>Here <strong>c</strong> is for combine, do not use it as variable name. It is as special as you!</p>
<p>Vectors cannot hold values with different modes (types). Try mixing modes and see what happens:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">TRUE</span>, <span class="st">&quot;three&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;1&quot;     &quot;TRUE&quot;  &quot;three&quot;</code></pre>
<p>All the values were converted to a single mode (characters) so that the vector can hold them all. To hold diverse types of values, you will need a <strong>list</strong>, which is explained later in this chapter.</p>
<p>If you need a vector with a sequence of numbers you can create it with <strong>start:end</strong> notation. This is often used in loops and operations on the indices of vectors etc. Let’s make a vector with values from 5 through 9:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span><span class="op">:</span><span class="dv">9</span></code></pre></div>
<pre><code>## [1] 5 6 7 8 9</code></pre>
<p>A more versatile way to make sequences is to call the <strong>seq</strong> function. Let’s do the same thing with <strong>seq</strong>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">9</span>)</code></pre></div>
<pre><code>## [1] 5 6 7 8 9</code></pre>
<p>seq also allows you to use increments other than 1. Try it with steps of 0.5:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">9</span>, .<span class="dv">5</span>)</code></pre></div>
<pre><code>## [1] 5.0 5.5 6.0 6.5 7.0 7.5 8.0 8.5 9.0</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-208" class="exercise"><strong>Exercise 6.4  </strong></span>Compute 1+2+3… +1000 with one line of R code. Hint: examine the example code for sum( ) function in the R help document.
</div>

<div id="commands-about-vector" class="section level4">
<h4><span class="header-section-number">6.2.1.1</span> Commands about vector</h4>
<p>Next we will try those commands about vector. First let’s find out what is the 4th element of our vector x, or the elements from 2 to 4.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">4</span>]</code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]</code></pre></div>
<pre><code>## [1]  2 22 11</code></pre>
<p>If you define the vector as y,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>x[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]</code></pre></div>
<p>No result is returned but you “captured” the result in a new vector, which holds 3 numbers. You can type y and hit return to see the results. Or do some computing with it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>x[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]; y</code></pre></div>
<pre><code>## [1]  2 22 11</code></pre>
<p>This does exactly the same in one line. Semicolon separates multiple commands.</p>
<p>Now if we want to know the number of elements in the vector</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(x)</code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>It’s also easy to know about the maximum, minimum, sum, mean and median individually or together. We can get standard deviation too.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(x)</code></pre></div>
<pre><code>## [1] 22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(x)</code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(x)</code></pre></div>
<pre><code>## [1] 45</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(x)</code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(x)</code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(x)</code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##       2       5       5       9      11      22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sd</span>(x)</code></pre></div>
<pre><code>## [1] 7.968689</code></pre>
<p>rank() function ranks the elements. Ties are shown as the average of these ranks. While sort() will sort from the smallest to the biggest, decreasing = T will make it sort form the biggest to the smallest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rank</span>(x)</code></pre></div>
<pre><code>## [1] 2.5 1.0 5.0 4.0 2.5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(x)</code></pre></div>
<pre><code>## [1]  2  5  5 11 22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(x, <span class="dt">decreasing =</span> T)</code></pre></div>
<pre><code>## [1] 22 11  5  5  2</code></pre>
<p>diff() lag and iterate the differences of vector x.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diff</span>(x)</code></pre></div>
<pre><code>## [1]  -3  20 -11  -6</code></pre>
<p>rev() will reverse the position of the elements in the vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rev</span>(x)</code></pre></div>
<pre><code>## [1]  5 11 22  2  5</code></pre>
<p>Operations are performed element by element. Same for log, sqrt, x^2, etc. They return vectors too.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(x)</code></pre></div>
<pre><code>## [1] 1.6094379 0.6931472 3.0910425 2.3978953 1.6094379</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(x)</code></pre></div>
<pre><code>## [1] 2.236068 1.414214 4.690416 3.316625 2.236068</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">^</span><span class="dv">2</span></code></pre></div>
<pre><code>## [1]  25   4 484 121  25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span><span class="op">*</span>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></code></pre></div>
<pre><code>## [1] 11  5 45 23 11</code></pre>
<p>If we don’t want the second element and save it as y:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>x[<span class="op">-</span><span class="dv">2</span>]
y</code></pre></div>
<pre><code>## [1]  5 22 11  5</code></pre>
<p>On the contrary, we can also add a new element to the end. These two commands get the same result.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(x, <span class="dv">7</span>)</code></pre></div>
<pre><code>## [1]  5  2 22 11  5  7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">append</span>(x, <span class="dv">7</span>)</code></pre></div>
<pre><code>## [1]  5  2 22 11  5  7</code></pre>
<p>Sometimes we are interested in unique elements:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(x)</code></pre></div>
<pre><code>## [1]  5  2 22 11</code></pre>
<p>And the frequencies of the unique elements:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(x)</code></pre></div>
<pre><code>## x
##  2  5 11 22 
##  1  2  1  1</code></pre>
<p>If we are interested in the index of the maximum or minimum:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.max</span>(x)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.min</span>(x)</code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Or we need to look for the location of a special value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>We can randomly chose some elements from the vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sample</span>(x, <span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 11  2</code></pre>
<p>Elements in the vector can have names. Type “x” in the command window to see the difference.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(x) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;Amy&quot;</span>, <span class="st">&quot;John&quot;</span>)
x</code></pre></div>
<pre><code>##    x    y    z  Amy John 
##    5    2   22   11    5</code></pre>
<p>Now we can refer to the elements by their names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="st">&quot;Amy&quot;</span>]</code></pre></div>
<pre><code>## Amy 
##  11</code></pre>
<p>If we have two vectors and try to compare them with each other:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">11</span>, <span class="dv">8</span>)
z &lt;-<span class="st"> </span><span class="kw">match</span>(y, x)
z</code></pre></div>
<pre><code>## [1]  1  4 NA</code></pre>
<p>match() returns the locations in 2nd vector. NA means missing, not found. To check if NA is in a vector, we use the function is.na( ). Note that the result is a vector holding logical values. Do we have missing value in our vector?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.na</span>(x)</code></pre></div>
<pre><code>##     x     y     z   Amy  John 
## FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.na</span>(z)</code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE</code></pre>
<p>Sometimes, when working with sample data, a given value isn’t available. But it’s not a good idea to just throw those values out. R has a value that explicitly indicates a sample was not available: <strong>NA</strong>. Many functions that work with vectors treat this value specially. For our z vector, try to get the sum of its values, and see what the result is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(z)</code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>The sum is considered “not available” by default because one of the vector’s values was <strong>NA</strong>. This is the responsible thing to do; R won’t just blithely add up the numbers without warning you about the incomplete data. We can explicitly tell <strong>sum</strong> (and many other functions) to remove <strong>NA</strong> values before they do their calculations, however.</p>
<p>Bring up documentation for the <strong>sum</strong> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">? sum</code></pre></div>
<p>sum package:base</p>
<p>R Documentation …</p>
<p>As you see in the documentation, <strong>sum</strong> can take an optional named argument, <strong>na.rm</strong>. It’s set to <strong>FALSE</strong> by default, but if you set it to <strong>TRUE</strong>, all <strong>NA</strong> arguments will be removed from the vector before the calculation is performed.</p>
<p>Try calling <strong>sum</strong> again, with <strong>na.rm</strong> parameter set to <strong>TRUE</strong>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(z, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] 5</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-232" class="exercise"><strong>Exercise 6.5  </strong></span>Now compute the average of values in z. Ignore the missing values.
</div>

</div>
<div id="scatter-plots-of-two-vectors" class="section level4">
<h4><span class="header-section-number">6.2.1.2</span> Scatter Plots of two vectors</h4>
<p>The <strong>plot</strong> function takes two vectors, one for X values and one for Y values, and draws a graph of them. Let’s draw a graph showing the relationship of numbers and their sines.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="fl">0.1</span>)
y &lt;-<span class="st"> </span><span class="kw">sqrt</span>(x)</code></pre></div>
<p>Then simply call plot with your two vectors:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(x, y)</code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-234-1.png" width="672" /></p>
<p>Great job! Notice on the graph that values from the first argument (x) are used for the horizontal axis, and values from the second (y) for the vertical.</p>

<div class="exercise">
<span id="exr:unnamed-chunk-235" class="exercise"><strong>Exercise 6.6  </strong></span>Create a vector with 21 integers from -10 to 10, and store it in the x variable. Then create a scatterplot of x^2 against x.
</div>

</div>
<div id="fish-example-of-vector" class="section level4">
<h4><span class="header-section-number">6.2.1.3</span> Fish example of vector</h4>
<p>Once upon a time, Tom, Jerry, and Mickey went fishing and they caught 7, 3, and 9 fishes, respectively. This information can be stored in a vector, like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">9</span>)</code></pre></div>
<pre><code>## [1] 7 3 9</code></pre>
<p>The <strong>c()</strong> function (<strong>c</strong> is short for Combine) creates a new vector by combining a set of values. If we want to continue to use the vector, we hold it in an object and give it a name:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fishes &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">9</span>)
fishes</code></pre></div>
<pre><code>## [1] 7 3 9</code></pre>
<p><strong>fishes</strong> is a vector with 3 data elements. There are many functions that operate on vectors. You can plot the vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>(fishes)  <span class="co"># see figure 6.1A</span></code></pre></div>
<p>You can compute the total:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(fishes)</code></pre></div>
<pre><code>## [1] 19</code></pre>
<p>We can access the individual elements by indices:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fishes[<span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 9</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-241" class="exercise"><strong>Exercise 6.7  </strong></span>Does Mickey caught more fishes than Tom and Jerry combined? Write R code to verify this statement using the <strong>fishes</strong> vector and return a TRUE or FALSE value.
</div>

<p>Jerry protested that the ¼ inch long fish he caught and released per fishing rules was not counted properly. We can change the values in the 2nd element directly by:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fishes[<span class="dv">2</span>] &lt;-<span class="st"> </span>fishes[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span><span class="dv">1</span> </code></pre></div>
<p>On the left side, we take the current value of the 2nd element, which is 3, and add an 1 to it. The result (4) is assigned back to the 2nd element itself. As a result, the 2nd element is increased by 1. This is not an math equation, but a value assignment operation. More rigorously, we should write this as fishes[2] <strong>&lt;-</strong> fishes[2] + 1</p>
<p>We can also directly overwrite the values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fishes[<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">4</span>
fishes</code></pre></div>
<pre><code>## [1] 7 4 9</code></pre>
<p>They started a camp fire, and each ate 1 fish for dinner. Now the fishes left:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fishes2 &lt;-<span class="st"> </span>fishes <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
fishes2</code></pre></div>
<pre><code>## [1] 6 3 8</code></pre>
<p>Most arithmetic operations work just as well on vectors as they do on single values. <strong>R subtracts 1 from each individual element</strong>. If you add a scalar (a single value) to a vector, the scalar will be added to each value in the vector, returning a new vector with the results.</p>
<p>While they are sleeping in their camping site, a fox stole 3 fishes from Jerry’s bucket, and 4 fishes from Mickey’s bucket. How many left?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stolen &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>)  <span class="co"># a new vector</span>
fishes2 <span class="op">-</span><span class="st"> </span>stolen</code></pre></div>
<pre><code>## [1] 6 0 4</code></pre>
<p>If you add or subtract two vectors of the same length, R will take the corresponding values from each vector and add or subtract them. The 0 is necessary to keep the vector length the same.</p>
<p>Proud of himself, Mickey wanted to make a 5ft x 5ft poster to show he is the best fisherman. Knowing that <strong>a picture worthes a thousand words</strong>, he learned R and started plotting. He absolutely needs his names on the plots. The data elements in a vector can have names or labels.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(fishes) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Jerry&quot;</span>, <span class="st">&quot;Mickey&quot;</span>)</code></pre></div>
<p>The right side is a vector, holding 3 character values. These values are assigned as the names of the 3 elements in the fishes vector. names is a built-in function. Our vector looks like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fishes</code></pre></div>
<pre><code>##    Tom  Jerry Mickey 
##      7      4      9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>(fishes)   <span class="co"># see figure 6.1B</span></code></pre></div>

<div class="figure" style="text-align: center"><span id="fig:6-1"></span>
<img src="images/img0601_fish.png" alt="Simple Bar plot" width="80%" />
<p class="caption">
Figure 6.1: Simple Bar plot
</p>
</div>
<p>Assigning names for a vector also enables us to use labels to access each element. Try getting the value for Jerry:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fishes[<span class="st">&quot;Jerry&quot;</span>]</code></pre></div>
<pre><code>## Jerry 
##     4</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-249" class="exercise"><strong>Exercise 6.8  </strong></span>Now see if you can set the value for <strong>Tom</strong> to something other than 5 using the name rather than the index.
</div>

<p>Tom proposes that their goal for next fishing trip is to double their catches.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>fishes</code></pre></div>
<pre><code>##    Tom  Jerry Mickey 
##     14      8     18</code></pre>
<p>Hopelessly optimistic, Jerry proposed that next time each should “square” their catches, so that together they may feed the entire school.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(fishes <span class="op">^</span><span class="st"> </span><span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 146</code></pre>
<p>Note that two operations are nested. You can obviously do it in two steps.</p>

<div class="exercise">
<span id="exr:unnamed-chunk-252" class="exercise"><strong>Exercise 6.9  </strong></span>Create a vector representing the prices of groceries, bread $2.5, milk $3.1, jam $5.3, beer $9.1. And create a bar plot to represent this information.
</div>

</div>
</div>
<div id="lists" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Lists</h3>
<p>Vectors contain a set of values. But one vector can only contain one type of values, numbers, characters, or logical values. A list can store a series of objects of different types.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">height =</span> <span class="dv">5</span>,<span class="dt">name =</span> <span class="st">&quot;John Doe&quot;</span>, <span class="dt">BP =</span> <span class="kw">c</span>(<span class="dv">100</span>, <span class="dv">77</span>))  <span class="co"># a list with 3 components</span></code></pre></div>
<p>If we want one of the items in its original form, we can extract it with double square brackets:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y[[<span class="dv">3</span>]]</code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<p>Alternatively, we can refer to the objects by using the dollar sign and the name of the object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y<span class="op">$</span>BP</code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<p>Many R functions, such as <em>t.test()</em>, returns results as a <strong>list</strong>, which contain a series of components, such as a P value, a vector of residuals or coefficients, and even a matrix of data. A list is the natural way to represent this sort of thing as one big object that could be parsed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="kw">t.test</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>), <span class="kw">rnorm</span>(<span class="dv">100</span>))  <span class="co"># rnorm(100): 100 random number</span>
result  <span class="co"># A list holds all  results of t-test</span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  rnorm(100) and rnorm(100)
## t = -0.4394, df = 197.33, p-value = 0.6609
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -0.3339632  0.2122578
## sample estimates:
##   mean of x   mean of y 
## -0.03163374  0.02921894</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result<span class="op">$</span>p.value  <span class="co"># This retrieves just the P value</span></code></pre></div>
<pre><code>## [1] 0.6608517</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result<span class="op">$</span>estimate  <span class="co"># this returns a vector containing two values</span></code></pre></div>
<pre><code>##   mean of x   mean of y 
## -0.03163374  0.02921894</code></pre>
<p>The help page of t.test contains information about what types of values are returned and their names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">? t.test</code></pre></div>
<p>Value</p>
<p>A list with class “htest” containing the following components:</p>
<p><strong>statistic</strong>: …</p>
<p><strong>p.value</strong>: the p-value for the test.</p>
<p><strong>estimate</strong>: the estimated mean or difference in means depending on whether it was a one-sample test or a two-sample test.</p>
<p>With this in mind, let’s run a simulation using a loop. What we want to do is to generate two sets of 100 random numbers from the standard normal distribution with zero mean and unit standard deviation, and perform t-test and get the P value. By repeating this process 500 times, we want to see the distribution of P values and count how many times we get significant result with P &lt; 0.05.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pvalues &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">500</span>)  <span class="co"># define a vector containing 500 numbers, all equal to 1.</span>
<span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">500</span>) {  <span class="co"># Loop: The values of i takes values from 1,2,3, …, 500</span>
     result =<span class="st"> </span><span class="kw">t.test</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>), <span class="kw">rnorm</span>(<span class="dv">100</span>))    
     pvalues[i] =<span class="st"> </span>result<span class="op">$</span>p.value  <span class="co"># P values are stored in the i-th element in the vector</span>
}  
<span class="kw">hist</span>(pvalues)  <span class="co"># define</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-258-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(pvalues)   </code></pre></div>
<pre><code>##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
## 0.0008133 0.2478585 0.4869624 0.4968841 0.7470706 0.9989726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(pvalues <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.05</span>)  <span class="co"># Count how many P values are less than 0.05. </span></code></pre></div>
<pre><code>## [1] 28</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-259" class="exercise"><strong>Exercise 6.10  </strong></span>Write R code to generate two vectors, each containing 100 random numbers from the standard normal distribution. Then compute Pearson’s correlation coefficient (PPC). Repeat 1000 times and plot the distribution of PPCs. Discuss your results briefly. Hint: You can use the above example code as a starting point.
</div>

</div>
<div id="strings-and-string-vectors" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Strings and string vectors</h3>
<p>We encounter text data sometimes. Plus, we also have row and column names. We can easily manipulate these string objects.</p>
<p>Define a <strong>string</strong> x: “R is cool”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;R is cool&quot;</span></code></pre></div>
<p>If we want to know the number of character of the string:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nchar</span>(x)</code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>We can concatenate strings. By default a space is added.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(x, <span class="st">&quot;!!&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;R is cool !!&quot;</code></pre>
<p>If we want to extract sub-string from position of 6 and 9:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">substr</span>(x, <span class="dv">6</span>, <span class="dv">9</span>)</code></pre></div>
<pre><code>## [1] &quot;cool&quot;</code></pre>
<p>Split string into a list which is separated by space:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">strsplit</span>(x, <span class="st">&quot; &quot;</span>)</code></pre></div>
<pre><code>## [[1]]
## [1] &quot;R&quot;    &quot;is&quot;   &quot;cool&quot;</code></pre>
<p>Find pattern “R” and replace with “Tim”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;R&quot;</span>, <span class="st">&quot;Tim&quot;</span>, x)</code></pre></div>
<pre><code>## [1] &quot;Tim is cool&quot;</code></pre>
<p>Or remove space followed by anything:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot; .*&quot;</span>, <span class="st">&quot;&quot;</span>, x)</code></pre></div>
<pre><code>## [1] &quot;R&quot;</code></pre>
<p>We can search for pattern like “is” in the string.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grepl</span>(<span class="st">&quot;is&quot;</span>, x)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We can also convert the whole string into low case or upper case by “tolower” or “toupper” function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tolower</span>(x)</code></pre></div>
<pre><code>## [1] &quot;r is cool&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">toupper</span>(x)</code></pre></div>
<pre><code>## [1] &quot;R IS COOL&quot;</code></pre>
<p>A <strong>string vector</strong> can hold many strings. This can be a column of names or IDs in a table. First let’s define a character vector <strong>x &lt;- c(“ab”, “cde”, “d”, “ab”)</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ab&quot;</span>, <span class="st">&quot;cde&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;ab&quot;</span>) </code></pre></div>
<p>We can use all commands about vector for our string vector, such as 2nd element in vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] &quot;cde&quot;</code></pre>
<p>Number of strings in the vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(x)</code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Unique elements:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(x)</code></pre></div>
<pre><code>## [1] &quot;ab&quot;  &quot;cde&quot; &quot;d&quot;</code></pre>
<p>Now we are interested in the duplicated element in the string vector. Is there any duplicated element in the vector?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">duplicated</span>(x)</code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<p>The last element is duplicated. F denotes FALSE, and T for TRUE. If we want to know the number of characters in each of the element:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nchar</span>(x)</code></pre></div>
<pre><code>## [1] 2 3 1 2</code></pre>
<p>We can also unite two vectors x and y if we define another vector y first:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ab&quot;</span>, <span class="st">&quot;e&quot;</span>)
<span class="kw">union</span>(x, y)</code></pre></div>
<pre><code>## [1] &quot;ab&quot;  &quot;cde&quot; &quot;d&quot;   &quot;e&quot;</code></pre>
<p>Is there intercept among these two sets of strings?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">intersect</span>(x, y)</code></pre></div>
<pre><code>## [1] &quot;ab&quot;</code></pre>
<p>We can add something like “Q” to each element:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(x, <span class="st">&quot;Q&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;ab Q&quot;  &quot;cde Q&quot; &quot;d Q&quot;   &quot;ab Q&quot;</code></pre>
<p>To get rid of the space between these element and “Q”, try paste0:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste0</span>(x, <span class="st">&quot;Q&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;abQ&quot;  &quot;cdeQ&quot; &quot;dQ&quot;   &quot;abQ&quot;</code></pre>
<p>If we want to collapse multiple strings into one, which is joined by space:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(x, <span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;ab cde d ab&quot;</code></pre>
<p>Using these functions, we can achieve many things. For example if we have a piece of DNA sequence:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">DNA &lt;-<span class="st"> &quot;taaCCATTGtaaGAACATGGTTGTCcaaaCAAGATGCTAGT&quot;</span></code></pre></div>
<p>Note that I am using the assignment operator “&lt;-”, instead of “=”, which also works most of the times but it could be ambiguous. First we need to convert everything to upper case.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">DNA &lt;-<span class="st"> </span><span class="kw">toupper</span>(DNA)</code></pre></div>
<p>Next, we want to cut this DNA into smaller pieces by looking for a certain pattern “ATG”. This type of thing happens in nature, as some enzymes cut DNA according to certain pattern.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">segs &lt;-<span class="st"> </span><span class="kw">strsplit</span>(DNA, <span class="st">&quot;ATG&quot;</span>)</code></pre></div>
<p>The result is contained in an object segs, which is a list. We needed the unlist( ) function to convert list to a string vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">segs &lt;-<span class="st"> </span><span class="kw">unlist</span>(segs)   
segs  <span class="co"># a vector of strings</span></code></pre></div>
<pre><code>## [1] &quot;TAACCATTGTAAGAAC&quot; &quot;GTTGTCCAAACAAG&quot;   &quot;CTAGT&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">segs[<span class="dv">1</span>]  <span class="co"># first segment</span></code></pre></div>
<pre><code>## [1] &quot;TAACCATTGTAAGAAC&quot;</code></pre>

<div class="exercise">
<span id="exr:unnamed-chunk-284" class="exercise"><strong>Exercise 6.11  </strong></span>In the iris flower dataset iris, define a new column called FullName which contains the full species name by adding “Iris “ in front of species name. In other words, “setosa” should become “Iris setosa”, “virginica” would be “Iris virginica”, and “versicolor” needs to be “Iris versicolor”.
</div>

</div>
<div id="matrix-operations" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Matrix operations</h3>
<p>A <strong>matrix</strong> has rows and columns, but it can only contain one type of values, i.e. numbers, characters, or logical values. Define a matrix using the Iris dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(iris[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>])</code></pre></div>
<p>First let’s show the first few rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(x)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1          5.1         3.5          1.4         0.2
## 2          4.9         3.0          1.4         0.2
## 3          4.7         3.2          1.3         0.2
## 4          4.6         3.1          1.5         0.2
## 5          5.0         3.6          1.4         0.2
## 6          5.4         3.9          1.7         0.4</code></pre>
<p>You can transform the matrix if you want, for the convenience of view and analysis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t</span>(x)</code></pre></div>
<pre><code>##                1   2   3   4   5   6   7   8   9  10
## Sepal.Length 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9
## Sepal.Width  3.5 3.0 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1
## Petal.Length 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5
## Petal.Width  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1</code></pre>
<p>We can produce a new matrix by each element is doubled and added 5</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">*</span>x<span class="op">+</span><span class="dv">5</span>
y</code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1          15.2        12.0          7.8         5.4
## 2          14.8        11.0          7.8         5.4
## 3          14.4        11.4          7.6         5.4
## 4          14.2        11.2          8.0         5.4
## 5          15.0        12.2          7.8         5.4
## 6          15.8        12.8          8.4         5.8
## 7          14.2        11.8          7.8         5.6
## 8          15.0        11.8          8.0         5.4
## 9          13.8        10.8          7.8         5.4
## 10         14.8        11.2          8.0         5.2</code></pre>
<p>Also we can do other calculation by adding or multiplying matrices.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">+</span><span class="st"> </span>y</code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1          20.3        15.5          9.2         5.6
## 2          19.7        14.0          9.2         5.6
## 3          19.1        14.6          8.9         5.6
## 4          18.8        14.3          9.5         5.6
## 5          20.0        15.8          9.2         5.6
## 6          21.2        16.7         10.1         6.2
## 7          18.8        15.2          9.2         5.9
## 8          20.0        15.2          9.5         5.6
## 9          18.2        13.7          9.2         5.6
## 10         19.7        14.3          9.5         5.3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">*</span><span class="st"> </span>y</code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1         77.52       42.00        10.92        1.08
## 2         72.52       33.00        10.92        1.08
## 3         67.68       36.48         9.88        1.08
## 4         65.32       34.72        12.00        1.08
## 5         75.00       43.92        10.92        1.08
## 6         85.32       49.92        14.28        2.32
## 7         65.32       40.12        10.92        1.68
## 8         75.00       40.12        12.00        1.08
## 9         60.72       31.32        10.92        1.08
## 10        72.52       34.72        12.00        0.52</code></pre>
<p>We can also get a logical matrix using logical code like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">&gt;</span><span class="dv">3</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1          TRUE        TRUE        FALSE       FALSE
## 2          TRUE       FALSE        FALSE       FALSE
## 3          TRUE        TRUE        FALSE       FALSE
## 4          TRUE        TRUE        FALSE       FALSE
## 5          TRUE        TRUE        FALSE       FALSE
## 6          TRUE        TRUE        FALSE       FALSE
## 7          TRUE        TRUE        FALSE       FALSE
## 8          TRUE        TRUE        FALSE       FALSE
## 9          TRUE       FALSE        FALSE       FALSE
## 10         TRUE        TRUE        FALSE       FALSE</code></pre>
<p>Now if we want to know the mean and sum of these rows and columns, try rowMeans(), colMeans(), rowSums(), colSums().</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rowMeans</span>(x)</code></pre></div>
<pre><code>##     1     2     3     4     5     6     7     8     9    10 
## 2.550 2.375 2.350 2.350 2.550 2.850 2.425 2.525 2.225 2.400</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colMeans</span>(x)</code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##         4.86         3.31         1.45         0.22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rowSums</span>(x)</code></pre></div>
<pre><code>##    1    2    3    4    5    6    7    8    9   10 
## 10.2  9.5  9.4  9.4 10.2 11.4  9.7 10.1  8.9  9.6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colSums</span>(x)</code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##         48.6         33.1         14.5          2.2</code></pre>
<p>Here we are computing the standard deviation by columns, using 2 for columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(x, <span class="dv">2</span>, sd)</code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##   0.29135698   0.30713732   0.10801234   0.07888106</code></pre>
<p>Or median by rows, using 1 for rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(x, <span class="dv">1</span>, median)</code></pre></div>
<pre><code>##    1    2    3    4    5    6    7    8    9   10 
## 2.45 2.20 2.25 2.30 2.50 2.80 2.40 2.45 2.15 2.30</code></pre>
<p>Heatmap is my favorite type of graph for visualizing a large matrix data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">heatmap</span>(x, <span class="dt">scale =</span> <span class="st">&quot;column&quot;</span>, <span class="dt">margins =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">5</span>))</code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-294-1.png" width="672" /></p>

<div class="exercise">
<span id="exr:unnamed-chunk-295" class="exercise"><strong>Exercise 6.12  </strong></span>Take the first 4 columns of iris data set and format as a matrix. Compute the median for each column using the apply function.
</div>

</div>
<div id="operations-on-data-frames" class="section level3">
<h3><span class="header-section-number">6.2.5</span> Operations on data frames</h3>
<p>Once data is read in as <strong>data frame</strong>, these are commands you can use to analyze it.</p>
<p>Read in data frame x:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>iris</code></pre></div>
<p>Using summary() we can get descriptive statistics of each column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(x)</code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  
##        Species  
##  setosa    :50  
##  versicolor:50  
##  virginica :50  
##                 
##                 
## </code></pre>
<p>head() and tail() functions show the fist and last few rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(x)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(x)</code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 145          6.7         3.3          5.7         2.5 virginica
## 146          6.7         3.0          5.2         2.3 virginica
## 147          6.3         2.5          5.0         1.9 virginica
## 148          6.5         3.0          5.2         2.0 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p>If we want to know both number of rows and number of columns of the data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(x)</code></pre></div>
<pre><code>## [1] 150   5</code></pre>
<p>We can just get number of rows or number of columns separately:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(x)</code></pre></div>
<pre><code>## [1] 150</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(x)</code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>If we are interested in the column names or row names, which should be a vector of strings:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(x)</code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot; 
## [5] &quot;Species&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(x)</code></pre></div>
<pre><code>##   [1] &quot;1&quot;   &quot;2&quot;   &quot;3&quot;   &quot;4&quot;   &quot;5&quot;   &quot;6&quot;   &quot;7&quot;   &quot;8&quot;   &quot;9&quot;   &quot;10&quot;  &quot;11&quot; 
##  [12] &quot;12&quot;  &quot;13&quot;  &quot;14&quot;  &quot;15&quot;  &quot;16&quot;  &quot;17&quot;  &quot;18&quot;  &quot;19&quot;  &quot;20&quot;  &quot;21&quot;  &quot;22&quot; 
##  [23] &quot;23&quot;  &quot;24&quot;  &quot;25&quot;  &quot;26&quot;  &quot;27&quot;  &quot;28&quot;  &quot;29&quot;  &quot;30&quot;  &quot;31&quot;  &quot;32&quot;  &quot;33&quot; 
##  [34] &quot;34&quot;  &quot;35&quot;  &quot;36&quot;  &quot;37&quot;  &quot;38&quot;  &quot;39&quot;  &quot;40&quot;  &quot;41&quot;  &quot;42&quot;  &quot;43&quot;  &quot;44&quot; 
##  [45] &quot;45&quot;  &quot;46&quot;  &quot;47&quot;  &quot;48&quot;  &quot;49&quot;  &quot;50&quot;  &quot;51&quot;  &quot;52&quot;  &quot;53&quot;  &quot;54&quot;  &quot;55&quot; 
##  [56] &quot;56&quot;  &quot;57&quot;  &quot;58&quot;  &quot;59&quot;  &quot;60&quot;  &quot;61&quot;  &quot;62&quot;  &quot;63&quot;  &quot;64&quot;  &quot;65&quot;  &quot;66&quot; 
##  [67] &quot;67&quot;  &quot;68&quot;  &quot;69&quot;  &quot;70&quot;  &quot;71&quot;  &quot;72&quot;  &quot;73&quot;  &quot;74&quot;  &quot;75&quot;  &quot;76&quot;  &quot;77&quot; 
##  [78] &quot;78&quot;  &quot;79&quot;  &quot;80&quot;  &quot;81&quot;  &quot;82&quot;  &quot;83&quot;  &quot;84&quot;  &quot;85&quot;  &quot;86&quot;  &quot;87&quot;  &quot;88&quot; 
##  [89] &quot;89&quot;  &quot;90&quot;  &quot;91&quot;  &quot;92&quot;  &quot;93&quot;  &quot;94&quot;  &quot;95&quot;  &quot;96&quot;  &quot;97&quot;  &quot;98&quot;  &quot;99&quot; 
## [100] &quot;100&quot; &quot;101&quot; &quot;102&quot; &quot;103&quot; &quot;104&quot; &quot;105&quot; &quot;106&quot; &quot;107&quot; &quot;108&quot; &quot;109&quot; &quot;110&quot;
## [111] &quot;111&quot; &quot;112&quot; &quot;113&quot; &quot;114&quot; &quot;115&quot; &quot;116&quot; &quot;117&quot; &quot;118&quot; &quot;119&quot; &quot;120&quot; &quot;121&quot;
## [122] &quot;122&quot; &quot;123&quot; &quot;124&quot; &quot;125&quot; &quot;126&quot; &quot;127&quot; &quot;128&quot; &quot;129&quot; &quot;130&quot; &quot;131&quot; &quot;132&quot;
## [133] &quot;133&quot; &quot;134&quot; &quot;135&quot; &quot;136&quot; &quot;137&quot; &quot;138&quot; &quot;139&quot; &quot;140&quot; &quot;141&quot; &quot;142&quot; &quot;143&quot;
## [144] &quot;144&quot; &quot;145&quot; &quot;146&quot; &quot;147&quot; &quot;148&quot; &quot;149&quot; &quot;150&quot;</code></pre>
<p>str() is a very useful function, which shows data types for all columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(x)</code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>Like string and vector, we can select one element in the data frame, like element in 2nd row and 3rd column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">2</span>, <span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 1.4</code></pre>
<p>Also we can subset a smaller data frame from x, such as columns 2 to 4 and rows 1 to 10:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]</code></pre></div>
<pre><code>##    Sepal.Width Petal.Length Petal.Width
## 1          3.5          1.4         0.2
## 2          3.0          1.4         0.2
## 3          3.2          1.3         0.2
## 4          3.1          1.5         0.2
## 5          3.6          1.4         0.2
## 6          3.9          1.7         0.4
## 7          3.4          1.4         0.3
## 8          3.4          1.5         0.2
## 9          2.9          1.4         0.2
## 10         3.1          1.5         0.1</code></pre>
<p>We can only retrieve all of the first column:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[, <span class="dv">1</span>]</code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4
##  [18] 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5
##  [35] 4.9 5.0 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0
##  [52] 6.4 6.9 5.5 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8
##  [69] 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4
##  [86] 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8
## [103] 7.1 6.3 6.5 7.6 4.9 7.3 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7
## [120] 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7
## [137] 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>Using the data frame name x followed column name has the same effect.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">$</span>Sepal.Length</code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4
##  [18] 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5
##  [35] 4.9 5.0 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0
##  [52] 6.4 6.9 5.5 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8
##  [69] 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4
##  [86] 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8
## [103] 7.1 6.3 6.5 7.6 4.9 7.3 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7
## [120] 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7
## [137] 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>If we need to know the average Sepal Length, we use mean() function. By the way, expressions can be nested.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(x<span class="op">$</span>Sepal.Length)</code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<p>It’s very common to select a subset of data by certain column. Note “==” is for comparison and “=” is for assign value. Also you can use logical symbols like “&gt;” ,“&lt;”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">subset</span>(x, Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>)
<span class="kw">head</span>(y)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(x, Sepal.Length <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span>)</code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 103          7.1         3.0          5.9         2.1 virginica
## 106          7.6         3.0          6.6         2.1 virginica
## 108          7.3         2.9          6.3         1.8 virginica
## 110          7.2         3.6          6.1         2.5 virginica
## 118          7.7         3.8          6.7         2.2 virginica
## 119          7.7         2.6          6.9         2.3 virginica
## 123          7.7         2.8          6.7         2.0 virginica
## 126          7.2         3.2          6.0         1.8 virginica
## 130          7.2         3.0          5.8         1.6 virginica
## 131          7.4         2.8          6.1         1.9 virginica
## 132          7.9         3.8          6.4         2.0 virginica
## 136          7.7         3.0          6.1         2.3 virginica</code></pre>
<p>We also can add new column named “id” to the data frame, which goes from 1 to 150. Function head() is used to examine.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">$</span>id &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">150</span>
<span class="kw">head</span>(x)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species id
## 1          5.1         3.5          1.4         0.2  setosa  1
## 2          4.9         3.0          1.4         0.2  setosa  2
## 3          4.7         3.2          1.3         0.2  setosa  3
## 4          4.6         3.1          1.5         0.2  setosa  4
## 5          5.0         3.6          1.4         0.2  setosa  5
## 6          5.4         3.9          1.7         0.4  setosa  6</code></pre>
<p>cbind() is for adding another exist column, like a column of random numbers y.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">150</span>)
x2 &lt;-<span class="st"> </span><span class="kw">cbind</span>(x, y)
<span class="kw">head</span>(x2)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species id           y
## 1          5.1         3.5          1.4         0.2  setosa  1  1.77206665
## 2          4.9         3.0          1.4         0.2  setosa  2  0.80973025
## 3          4.7         3.2          1.3         0.2  setosa  3  0.14525073
## 4          4.6         3.1          1.5         0.2  setosa  4 -1.47047948
## 5          5.0         3.6          1.4         0.2  setosa  5 -0.67842522
## 6          5.4         3.9          1.7         0.4  setosa  6 -0.02672698</code></pre>
<p>Similar as cbind(), rbind() is for adding another exist row or rows with same length of columns. Now we use tail() to examine.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">newRow &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="st">&quot;setosa&quot;</span>, <span class="dv">151</span>)
x3 &lt;-<span class="st"> </span><span class="kw">rbind</span>(x, newRow)
<span class="kw">tail</span>(x3)</code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species  id
## 146          6.7           3          5.2         2.3 virginica 146
## 147          6.3         2.5            5         1.9 virginica 147
## 148          6.5           3          5.2           2 virginica 148
## 149          6.2         3.4          5.4         2.3 virginica 149
## 150          5.9           3          5.1         1.8 virginica 150
## 151            1           1            1           1    setosa 151</code></pre>
<p>We can sort the data frame by certain column. For example we need to sort first column in ascending, or to sort second column in descending order.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>x[<span class="kw">order</span>(x[, <span class="dv">1</span>]), ]
<span class="kw">head</span>(y)</code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species id
## 14          4.3         3.0          1.1         0.1  setosa 14
## 9           4.4         2.9          1.4         0.2  setosa  9
## 39          4.4         3.0          1.3         0.2  setosa 39
## 43          4.4         3.2          1.3         0.2  setosa 43
## 42          4.5         2.3          1.3         0.3  setosa 42
## 4           4.6         3.1          1.5         0.2  setosa  4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>x[<span class="kw">rev</span>(<span class="kw">order</span>(x[, <span class="dv">2</span>])), ]
<span class="kw">head</span>(y)</code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species id
## 16          5.7         4.4          1.5         0.4  setosa 16
## 34          5.5         4.2          1.4         0.2  setosa 34
## 33          5.2         4.1          1.5         0.1  setosa 33
## 15          5.8         4.0          1.2         0.2  setosa 15
## 17          5.4         3.9          1.3         0.4  setosa 17
## 6           5.4         3.9          1.7         0.4  setosa  6</code></pre>
<p>We can view sepal length by species using boxplot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Species, x)</code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-313-1.png" width="672" /></p>
<p>Or compute summary statistics by category, here average by species:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(. <span class="op">~</span><span class="st"> </span>Species, x, mean)</code></pre></div>
<pre><code>##      Species Sepal.Length Sepal.Width Petal.Length Petal.Width    id
## 1     setosa        5.006       3.428        1.462       0.246  25.5
## 2 versicolor        5.936       2.770        4.260       1.326  75.5
## 3  virginica        6.588       2.974        5.552       2.026 125.5</code></pre>
<p>It is easier to conduct statistical analysis after organizing data as data frame. Analysis of variance, or ANOVA tests whether sepal length is the same cross species in data frame x.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">aov</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Species, x)
<span class="kw">summary</span>(m)</code></pre></div>
<pre><code>##              Df Sum Sq Mean Sq F value Pr(&gt;F)    
## Species       2  63.21  31.606   119.3 &lt;2e-16 ***
## Residuals   147  38.96   0.265                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Regression analysis use linear model(lm) to analyze the relationship of these columns. Here we use sepal length as a function of sepal width and petal length plus error.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">lm</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Sepal.Width <span class="op">+</span><span class="st"> </span>Petal.Length, x)
<span class="kw">summary</span>(m)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Sepal.Length ~ Sepal.Width + Petal.Length, data = x)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.96159 -0.23489  0.00077  0.21453  0.78557 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   2.24914    0.24797    9.07 7.04e-16 ***
## Sepal.Width   0.59552    0.06933    8.59 1.16e-14 ***
## Petal.Length  0.47192    0.01712   27.57  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3333 on 147 degrees of freedom
## Multiple R-squared:  0.8402, Adjusted R-squared:  0.838 
## F-statistic: 386.4 on 2 and 147 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>We use data.frame() function to define a new data frame with 100 rows and two columns, <em>ids</em> and <em>rand</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">rand =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">head</span>(y)</code></pre></div>
<pre><code>##   id        rand
## 1  1 -2.26853010
## 2  2  1.30853074
## 3  3 -0.66991418
## 4  4 -0.06837266
## 5  5 -0.78706646
## 6  6  0.26594401</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(y)</code></pre></div>
<pre><code>##      id         rand
## 95   95 -0.001182203
## 96   96  0.261477504
## 97   97 -0.303208365
## 98   98 -0.787625866
## 99   99  1.234340643
## 100 100 -0.439816626</code></pre>
<p>Now we merge two data frames x and y by a common column called ids. Note the new data frame has only 100 rows. We can also merge data frame by row names too.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span><span class="kw">merge</span>(x, y, <span class="dt">by =</span> <span class="st">&quot;id&quot;</span>)
<span class="kw">head</span>(z)</code></pre></div>
<pre><code>##   id Sepal.Length Sepal.Width Petal.Length Petal.Width Species        rand
## 1  1          5.1         3.5          1.4         0.2  setosa -2.26853010
## 2  2          4.9         3.0          1.4         0.2  setosa  1.30853074
## 3  3          4.7         3.2          1.3         0.2  setosa -0.66991418
## 4  4          4.6         3.1          1.5         0.2  setosa -0.06837266
## 5  5          5.0         3.6          1.4         0.2  setosa -0.78706646
## 6  6          5.4         3.9          1.7         0.4  setosa  0.26594401</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z)</code></pre></div>
<pre><code>##        id          Sepal.Length    Sepal.Width     Petal.Length  
##  Min.   :  1.00   Min.   :4.300   Min.   :2.000   Min.   :1.000  
##  1st Qu.: 25.75   1st Qu.:5.000   1st Qu.:2.800   1st Qu.:1.500  
##  Median : 50.50   Median :5.400   Median :3.050   Median :2.450  
##  Mean   : 50.50   Mean   :5.471   Mean   :3.099   Mean   :2.861  
##  3rd Qu.: 75.25   3rd Qu.:5.900   3rd Qu.:3.400   3rd Qu.:4.325  
##  Max.   :100.00   Max.   :7.000   Max.   :4.400   Max.   :5.100  
##   Petal.Width          Species        rand         
##  Min.   :0.100   setosa    :50   Min.   :-2.73324  
##  1st Qu.:0.200   versicolor:50   1st Qu.:-0.78721  
##  Median :0.800   virginica : 0   Median :-0.06156  
##  Mean   :0.786                   Mean   :-0.10685  
##  3rd Qu.:1.300                   3rd Qu.: 0.49493  
##  Max.   :1.800                   Max.   : 2.11266</code></pre>

<div class="exercise">
<p><span id="exr:unnamed-chunk-319" class="exercise"><strong>Exercise 6.13  </strong></span>A researcher studied the pathogenicity of fungi species on certain plants. Their results are in two files in the Datasets folder on D2L as a zipped file pathogenicity.zip. Once unzipped, it contains two files. The first (pathogenicity.txt) contains pathogenicity (the “Infection” column) in terms percentages plant tissue infected. Each isolate was used to infect 9 plants. The entire experiment is repeated according to expt column (1 or 2). The second file (species.txt) contains information about the genotypes identified by sequencing of the fungi DNA. Isolate ID links these two files. The goal is to compare the pathogens in terms of pathogenicity. These two files are available here and both are tab-deliminated text files.</p>
<ol style="list-style-type: decimal">
<li><p>Create a folder, download the data files into it, and create an Rstudio project in the folder.</p></li>
<li><p>Read in these two files. Note that for the species file, DO NOT treat Strings as factors. Unselect this in the import wizard. Keep a copy of the import command into your R script.</p></li>
<li><p>Change the species name from “no matching sequences/no significant similarity” to “no match”</p></li>
<li><p>Plot histogram of infection across all experiments.</p></li>
<li><p>Merge these two files according to Isolate ID.</p></li>
<li><p>Show the number of rows and columns of the merged data.</p></li>
<li><p>Show the first few rows of data.</p></li>
<li><p>Show the column names</p></li>
<li><p>Show summary descriptive statistics for all columns</p></li>
<li><p>Show the data types of all columns in the merged data</p></li>
<li><p>Create a pie chart by Species (hint: tabulate frequencies first)</p></li>
<li><p>Generate a boxplot to compare infection percentage across species</p></li>
<li><p>Sort the combined data by infection and show the most infectious species with highest percentages.</p></li>
<li><p>Compute average infection for each of the species (use aggregate)</p></li>
<li><p>Run linear regression for infection as a function of species, expt, and plant. We want to know if the technical replicate factors have significant impact on the data. Interpret your results.</p></li>
</ol>
<p>Provide interpretation of the plots or quantitative analyses.</p>
<p>Hint 1. Make sure the data is correctly imported in the desired type. Numeric, character or factor.</p>
Hint 2: Structure your R code by partition into parts with comments.
</div>

</div>
</div>
<div id="for-more-in-depth-exercises" class="section level2">
<h2><span class="header-section-number">6.3</span> For more in-depth exercises</h2>
<p>Go to: <a href="http://tryr.codeschool.com/" class="uri">http://tryr.codeschool.com/</a></p>
<p>1 This material is based on <a href="http://tryr.codeschool.com/" class="uri">http://tryr.codeschool.com/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analyzing-heart-attack-data-set-ii.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vectors-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
